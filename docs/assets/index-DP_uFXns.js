(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();function u(c){return new Worker(""+new URL("idb.worker-08nRq9ov.js",import.meta.url).href,{name:c?.name})}let p=class{worker;seq=0;pending=new Map;constructor(){this.worker=new u,this.worker.onmessage=o=>this.Message(o.data)}Message(o){const{id:n,ok:e,result:t,error:s}=o,i=this.pending.get(n);i&&(this.pending.delete(n),e?i.resolve(t):(i.reject(s),console.warn(o)))}Call(o,n){return new Promise((e,t)=>{const s=++this.seq;this.pending.set(s,{resolve:e,reject:t}),this.worker.postMessage({id:s,type:o,payload:n})})}},g=class{parentNode;scope={min:.5,max:2,zoom:1,w:0,h:0,dpr:Math.round(window.devicePixelRatio)||1,backgroundTileStep:100};x=0;y=0;isDragging=!1;constructor(o={}){this.parentNode=o.parentNode||document.body}get zoom(){return this.scope.zoom}set zoom(o){o>=this.scope.min&&o<=this.scope.max&&(this.scope.zoom=o)}SpaceLine(o){return o/this.zoom}};const f=.001,A=.002;let m=class{down=null;pinch=null;touchMode=null;constructor(o){const n=o.parentNode;n.addEventListener("contextmenu",e=>{e.preventDefault()}),n.addEventListener("wheel",e=>{r.zoom-=e.deltaY*f,r.isDragging=!0},{passive:!0}),n.addEventListener("mousedown",e=>{this.PanStart(e.offsetX,e.offsetY)}),n.addEventListener("mousemove",e=>{this.PanMove(e.offsetX,e.offsetY)}),n.addEventListener("mouseup",e=>{this.PanEnd(e.offsetX,e.offsetY)}),n.addEventListener("mouseleave",()=>{this.down=null,this.touchMode=null}),n.addEventListener("touchstart",e=>{if(e.touches.length===1&&this.touchMode!=="pinch"){const t=e.touches[0];this.touchMode="pan",this.PanStart(t.clientX,t.clientY)}if(e.touches.length===2){const t=e.touches[0],s=e.touches[1],i=t.clientX-s.clientX,d=t.clientY-s.clientY;this.touchMode="pinch",this.pinch={dist:Math.hypot(i,d)}}},{passive:!1}),n.addEventListener("touchmove",e=>{if(this.touchMode==="pan"&&e.touches.length===1){const t=e.touches[0];this.PanMove(t.clientX,t.clientY),e.preventDefault()}if(this.touchMode==="pinch"&&e.touches.length===2&&this.pinch){const t=e.touches[0],s=e.touches[1],i=t.clientX-s.clientX,d=t.clientY-s.clientY,l=Math.hypot(i,d),h=this.pinch.dist-l;this.pinch.dist=l,r.zoom+=h*A,r.isDragging=!0,e.preventDefault()}},{passive:!1}),n.addEventListener("touchend",e=>{if(this.touchMode==="pinch"&&e.touches.length<2){this.touchMode=null,this.pinch=null;return}if(this.touchMode==="pan"&&e.touches.length===0){const t=e.changedTouches[0],s=n.getBoundingClientRect(),i=t.clientX-s.left,d=t.clientY-s.top;this.touchMode=null,this.PanEnd(i,d)}})}PanStart(o,n){this.down={offsetX:o,offsetY:n,xView:r.x,yView:r.y},r.isDragging=!0}PanMove(o,n){if(!this.down)return;const e=r.SpaceLine(o-this.down.offsetX),t=r.SpaceLine(n-this.down.offsetY);r.x=this.down.xView-e,r.y=this.down.yView-t,r.isDragging=!0}async PanEnd(o,n){this.down=null,r.isDragging=!1,console.log(o,n)}};const v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAVRJREFUeJzt3LFNw0AYgFGDmIEZaCIWoGUKeoaiZwpaFkBpmIEloEkKIgoMPr7EvCe5vST3RdZvRblpAgAAADhJ77uLGc4WWudw45dad/XO6zfw3wkQEyAmQEyA2Nxp5TdjpsnoC3M2ZYkZX4QDbkExt6CYJ+GYW1BMgJgAMQFiAqyIH2R+YMi4eL3ZrDLEy3Z7/OP1bvNXex31l2vtm7+/loxwsdRCh26vbkYtnXl6fV58zWEB9h7u3ka/xHD3j5fD1h46hq5h86dp7OfwHBATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQEyAmQEyAmAAxAWICxASICRATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQGxpg5F/8/9LIzzH8rIi1RBhlWIARJ4vwDWs/M2jpA5scWTbTSRxbBgAAAAAAn30A4fLQgWRlXGAAAAAASUVORK5CYII=";class w{parentNode;display;remote={btn:null,id:null,type:null,data:null};constructor(o={}){this.parentNode=o.parentNode||document.body,this.display=new E({parentNode:this.parentNode}),this.AddButton("square","toggle","도형1",v)}AddButton(o,n,e,t){const s=document.createElement("div");s.textContent=e,s.classList.add("button"),s.classList.add(n),t&&(s.style.backgroundImage=`url(${t})`),this.parentNode.appendChild(s),s.addEventListener("click",()=>{this.remote.id!==null?this.remote.type==="toggle"&&this.remote.id===o?this.End():(this.End(),this.Start(s,o,n,e)):this.Start(s,o,n,e)})}Start(o,n,e,t){o.classList.add("menu_select"),this.display.text=t,this.remote.btn=o,this.remote.id=n,this.remote.type=e}End(){this.remote.btn&&(this.remote.btn.classList.remove("menu_select"),this.display.text=`
`,this.remote.btn=null,this.remote.id=null,this.remote.type=null)}}class E{parentNode;div;down=null;constructor(o={}){this.parentNode=o.parentNode||document.body;const n=document.createElement("div");this.div=n,n.classList.add("display"),n.innerText=`
`,this.parentNode.appendChild(n),n.addEventListener("pointerdown",t=>{n.setPointerCapture(t.pointerId),this.down={x:t.offsetX,y:t.offsetY}}),n.addEventListener("pointermove",t=>{if(!this.down)return;const s=t.clientX-this.down.x,i=t.clientY-this.down.y;this.parentNode.style.left=`${s}px`,this.parentNode.style.top=`${i}px`});const e=t=>{this.down=null,n.releasePointerCapture(t.pointerId)};n.addEventListener("pointerup",e),n.addEventListener("pointercancel",e)}set text(o){this.div.innerText=o}}const y=document.querySelector("#app"),M=new p,r=a(g,"view");a(m,"controller");a(w,"remocon");const L=async()=>{const c=await M.Call("loadSetting",{});console.log(c)};L();function a(c,o){const n=document.createElement("div");return n.id=o,y?.appendChild(n),new c({parentNode:n})}

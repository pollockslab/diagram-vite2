(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function D(d){return new Worker(""+new URL("idb.worker-BL5NX-j_.js",import.meta.url).href,{name:d?.name})}let R=class{worker;seq=0;pending=new Map;constructor(){this.worker=new D,this.worker.onmessage=t=>this.Message(t.data)}Message(t){const{id:e,ok:o,result:s,error:i}=t,n=this.pending.get(e);n&&(this.pending.delete(e),o?n.resolve(s):(n.reject(i),console.warn(t)))}Call(t,e){return new Promise((o,s)=>{const i=++this.seq;this.pending.set(i,{resolve:o,reject:s}),this.worker.postMessage({id:i,type:t,payload:e})})}};const l=Math.round(window.devicePixelRatio)||1,E={w:1024,h:1024};let I=class{type="axis";id=null;parentID=null;tabID=null;zIndex=null;x=0;y=0;_w=100;_h=100;text="";_capture;children={none:[],point:[],square:[],line:[],button:[]};constructor(){const t=document.createElement("canvas"),e=t.getContext("2d");this._capture={cav:t,ctx:e},this.InitCapture(0)}get w(){return this._w}set w(t){100<=t&&t<=1e3&&(this._w=t)}get h(){return this._h}set h(t){100<=t&&t<=1e3&&(this._h=t)}get serialize(){return{type:this.type,id:this.id,parentID:this.parentID,tabID:this.tabID,zIndex:this.zIndex,x:this.x,y:this.y,w:this.w,h:this.h,text:""}}SetData(t={}){Object.assign(this,t)}InitCapture(t){const e=t===1?E.w:this.w,o=t===1?E.h:this.h,s=this._capture.cav;s.width=e*l,s.height=o*l,s.style=`position:absolute; float:right; top:100px;right: ${e/10}px; width: ${e/10}px; height: ${o/10}px;border: 1px solid gold;`;const i=this._capture.ctx;i.setTransform(1,0,0,1,0,0),i.scale(l,l)}GetChildrenByType(t){return this.children[t]||[]}AddChild(t){const e=p.GET_CLASS_BY_NAME(t.type);if(!e)return null;const o=new e(t);return o.InitCapture(0),o.Render(),this.GetChildrenByType(t.type).push(o),o}DeleteChild(t){const e=this.GetChildrenByType(t.type),o=e.indexOf(t);o>-1&&e.splice(o,1)}SetOrderChild(t){const e=this.GetChildrenByType(t.type),o=e.indexOf(t);if(o>-1){const[s]=e.splice(o,1);e.push(s)}}FindByID(t){const e=Object.values(this.children);for(const o of e){const s=o.find(i=>i.id===t);if(s)return s}return null}FindByIDAndType(t,e){const s=this.GetChildrenByType(e).find(i=>i.id===t);return s||null}GetAllChildren(){const t=[],e=Object.values(this.children);for(const o of e)for(const s of o)t.push(s);return t}IsCollisionPoint(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h}GetCollisionChildPoint(t,e){for(let o=p.CHILD_ORDER.length-1;o>=0;o--){const s=p.CHILD_ORDER[o],i=this.GetChildrenByType(s);for(let n=i.length-1;n>=0;n--){const A=i[n];if(A.IsCollisionPoint(t,e))return A}}return null}GetCollisionEdge(t,e){if(!this.IsCollisionPoint(t,e))return null;const o=10,s=this.x,i=this.x+this.w,n=this.y,A=this.y+this.h;let a="";return Math.abs(t-i)<=o?a+="e":Math.abs(t-s)<=o&&(a+="w"),Math.abs(e-A)<=o?a+="s":Math.abs(e-n)<=o&&(a+="n"),a||null}Render(){}Draw(t){t.drawImage(this._capture.cav,0,0,this.w*l,this.h*l,this.x,this.y,this.w,this.h)}DrawHover(t){t.save(),t.strokeStyle="skyblue",t.lineWidth=6,t.strokeRect(this.x+3,this.y+3,this.w-6,this.h-6),t.restore()}DrawSelect(t){t.save(),t.strokeStyle="green",t.lineWidth=6,t.strokeRect(this.x+3,this.y+3,this.w-6,this.h-6),t.restore()}},B=class extends I{type="square";bgColor="orange";text="반가워요123";constructor(t){super(),this.SetData(t)}get serialize(){return{...super.serialize,bgColor:this.bgColor}}a2=1;Render(){const t=this._capture.ctx,e=0,o=0;t.save(),t.clearRect(e,o,this.w,this.h),t.fillStyle=this.bgColor,t.fillRect(e,o,this.w,this.h);const s=16;t.font=`${s}px sans-serif`,t.fillStyle="white",t.textBaseline="top",t.fillText(`글: ${this.text}${this.a2++}`,e+20,o+20),t.restore()}};const f={axis:I,square:B},v=[null,"e","w","s","n","es","en","ws","wn"],N=d=>{const t=f[d];if(!t)throw new Error(`[D_ERROR] ${d} 클래스가 등록되지 않았습니다.`);return t},p={CLASS:f,EDGE:v,CHILD_ORDER:Object.keys(f),GET_CLASS_BY_NAME:N};let x=class{parentNode;popup;targetDiagram=null;constructor(t={}){this.parentNode=t.parentNode||document.body,this.parentNode.addEventListener("click",e=>{e.target===this.parentNode&&this.Close()}),this.popup=document.createElement("div"),this.popup.classList.add("popup"),this.popup.contentEditable="true",this.parentNode.appendChild(this.popup)}SetData(t){console.log(t)}Open(t){if(h.down===void 0||h.down===null)return;const e=h.down.target;this.parentNode.style.display="block",console.log(e),e&&(this.targetDiagram=e,this.popup.textContent=t)}Close(){this.parentNode.style.display="none",this.targetDiagram!==null&&(this.targetDiagram.text=this.popup.textContent,this.targetDiagram.Render(),h.loop.isDraw=!0,h.Loop(null),console.log("바껴?"))}},k=class extends p.CLASS.axis{parentNode;scope={min:.5,max:2,zoom:1,w:0,h:0,dpr:Math.round(window.devicePixelRatio)||1,bgStep:100,bgPattern:null};layers={};status={hover:null,select:[]};constructor(t={}){super(),this.parentNode=t.parentNode||document.body,this.InitLayers()}get zoom(){return this.scope.zoom}set zoom(t){t>=this.scope.min&&t<=this.scope.max&&(this.scope.zoom=t)}InitLayers(){["background","board","effect"].forEach(t=>{const e=document.createElement("canvas"),o=e.getContext("2d");e.style="position:absolute; width:100%; height:100%;",this.parentNode.appendChild(e),this.layers[t]={cav:e,ctx:o}})}SpaceX(t){const e=this.scope.w,o=this.scope.zoom,s=(t-e/2)/o+this.x;return Math.round(s)}SpaceY(t){const e=this.scope.h,o=this.scope.zoom,s=(t-e/2)/o+this.y;return Math.round(s)}SpaceLine(t){return Math.round(t/this.zoom)}async LoadMap(t){this.tabID=t,this.children={none:[],point:[],square:[],line:[],button:[]},this.AddChild({type:"square",x:-400,y:0,w:700,h:300,bgColor:"blue",id:"blue"}),this.AddChild({type:"square",x:-200,y:0,w:300,h:300,bgColor:"orange",id:"orange"}),h.loop.isDraw=!0,h.Loop(null)}Draw(){const t=this.scope.w,e=this.scope.h,o=this.scope.dpr,s=this.scope.zoom;Object.values(this.layers).forEach(A=>{const a=A.ctx;a.setTransform(o,0,0,o,0,0),a.clearRect(0,0,t,e),a.translate(t/2,e/2),a.scale(s,s),a.translate(-this.x,-this.y)}),this.DrawBackground(),["none","point","square","line","button"].forEach(A=>{const a=this.children[A];if(!(a.length<=0))for(const g of a)g.Draw(this.layers.board.ctx)});const n=this.status.hover;n!==null&&n.DrawHover(this.layers.effect.ctx)}DrawBackground(){if(!this.layers.background)return;const t=this.layers.background.ctx,e=this.scope.bgStep,{w:o,h:s,dpr:i,zoom:n}=this.scope;if(!this.scope.bgPattern){const A=document.createElement("canvas");A.width=e,A.height=e;const a=A.getContext("2d");a.strokeStyle="rgb(54,63,63)",a.beginPath(),a.moveTo(0,0),a.lineTo(e,e),a.moveTo(e,0),a.lineTo(0,e),a.stroke(),this.scope.bgPattern=t.createPattern(A,"repeat")}if(this.scope.bgPattern){t.save(),t.setTransform(i,0,0,i,0,0),t.clearRect(0,0,o,s);const A=new DOMMatrix;A.translateSelf(o/2,s/2),A.scaleSelf(n,n),A.translateSelf(-this.x,-this.y),this.scope.bgPattern.setTransform(A),t.fillStyle=this.scope.bgPattern,t.fillRect(0,0,o,s),t.restore()}}},y=class{parentNode;down=null;move={x:0,y:0,isLoop:!1};pinch=null;loop={isLoop:!1,isHover:!1,isEdge:!1,isDraw:!1,isResize:!1,isRender:!1,isCaptureCompact:!1,isCaptureExpand:!1};constructor(t){const e=t.parentNode;this.parentNode=e,this.Resize();const o=()=>{if(!this.pinch||this.pinch.targets.size<2)return 0;const i=Array.from(this.pinch.targets.values());return Math.hypot(i[0].clientX-i[1].clientX,i[0].clientY-i[1].clientY)},s=i=>{if(e.releasePointerCapture(i.pointerId),!(!this.pinch||!this.pinch.targets.has(i.pointerId)))switch(this.pinch.targets.delete(i.pointerId),this.pinch.targets.size){case 0:this.down&&this.PanEnd(i.offsetX,i.offsetY,i.timeStamp),this.pinch=null,this.down=null;break;case 1:this.pinch.distance=0;break}};window.addEventListener("resize",()=>{this.Resize()}),e.addEventListener("contextmenu",i=>{i.preventDefault()}),e.addEventListener("wheel",i=>{this.PanZoom(-i.deltaY*.001)},{passive:!0}),e.addEventListener("pointerdown",i=>{if(!(this.pinch&&this.pinch.targets.size>=2))switch(e.setPointerCapture(i.pointerId),this.pinch===null&&(this.pinch={distance:0,targets:new Map}),this.pinch.targets.set(i.pointerId,i),this.pinch.targets.size){case 1:this.PanStart(i.offsetX,i.offsetY,i.timeStamp);break;case 2:this.pinch.distance=o();break}}),e.addEventListener("pointermove",i=>{switch(this.pinch?.targets.has(i.pointerId)&&this.pinch.targets.set(i.pointerId,i),this.pinch?.targets.size??0){case 0:this.PanHover(i.offsetX,i.offsetY);break;case 1:this.PanMove(i.offsetX,i.offsetY);break;case 2:const n=o();if(this.pinch&&this.pinch.distance>0){const A=this.pinch.distance-n;this.PanZoom(-A*.002)}this.pinch&&(this.pinch.distance=n);break}}),e.addEventListener("pointerup",s),e.addEventListener("pointercancel",s)}Resize(){r.scope.w=window.innerWidth,r.scope.h=window.innerHeight,this.loop.isResize=!0,this.Loop(null)}PanZoom(t){r.zoom+=t,this.loop.isDraw=!0,this.Loop(null)}PanStart(t,e,o){const s=r.SpaceX(t),i=r.SpaceY(e),n=r.GetCollisionChildPoint(s,i);n!==null&&r.SetOrderChild(n);const A=n||r,a=n?n.GetCollisionEdge(s,i):null;this.down={target:A,offsetX:t,offsetY:e,x:A.x,y:A.y,w:A.w,h:A.h,timeStamp:o,edge:a},this.down.edge!==null&&(console.log(a),this.loop.isCaptureExpand=!0),this.loop.isDraw=!0,this.Loop(null)}PanMove(t,e){if(this.down===null)return;const o=c.remote.id;if(o===null||o==="pointer"){const s=r.SpaceLine(t-this.down.offsetX),i=r.SpaceLine(e-this.down.offsetY),n=this.down.target;n===r?(n.x=this.down.x-s,n.y=this.down.y-i):this.down.edge===null?(n.x=this.down.x+s,n.y=this.down.y+i):this.ResizeDiagram(s,i),this.loop.isDraw=!0,this.Loop(null)}}PanHover(t,e){this.down===null&&(this.move.x=t,this.move.y=e,this.loop.isHover=!0,this.Loop(null))}PanEnd(t,e,o){const s=this.down?.timeStamp??0,i=o-s<200,n=c.remote.id;if(i&&n!==null){const a=r.SpaceX(t),g=r.SpaceY(e);c.Action({x:a,y:g})}const A=new Map;this.down?.edge!==null&&(this.loop.isCaptureCompact=!0,A.set("target",this.down?.target)),this.loop.isDraw=!0,this.Loop(A),this.down=null}Loop(t){this.loop.isLoop===!1&&(this.loop.isLoop=!0,requestAnimationFrame(()=>{if(this.loop.isLoop=!1,this.loop.isEdge===!0&&(this.loop.isEdge=!1),this.loop.isHover===!0&&(this.loop.isHover=!1,this.CheckCollisionEdge()),this.loop.isCaptureCompact===!0){this.loop.isCaptureCompact=!1;const e=t?.get("target");e!==null&&(console.log(e,t),e.InitCapture(0),e.Render())}if(this.loop.isCaptureExpand===!0){this.loop.isCaptureExpand=!1;const e=this.down?.target;e?.InitCapture(1),e?.Render()}this.loop.isRender===!0&&(this.loop.isRender=!1,r.Draw()),this.loop.isDraw===!0&&(this.loop.isDraw=!1,r.Draw()),this.loop.isResize===!0&&(this.loop.isResize=!1,Object.values(r.layers).forEach(e=>{e.cav.width=r.scope.w*r.scope.dpr,e.cav.height=r.scope.h*r.scope.dpr}),r.Draw())}))}ResizeDiagram(t,e){if(this.down===null)return;const o=new Map;switch(this.down.edge){case"e":o.set("w",this.down.w+t);break;case"w":o.set("x",this.down.x+t),o.set("w",this.down.w-t);break;case"s":o.set("h",this.down.h+e);break;case"n":o.set("y",this.down.y+e),o.set("h",this.down.h-e);break;case"es":o.set("w",this.down.w+t),o.set("h",this.down.h+e);break;case"wn":o.set("x",this.down.x+t),o.set("w",this.down.w-t),o.set("y",this.down.y+e),o.set("h",this.down.h-e);break;case"en":o.set("w",this.down.w+t),o.set("y",this.down.y+e),o.set("h",this.down.h-e);break;case"ws":o.set("x",this.down.x+t),o.set("w",this.down.w-t),o.set("h",this.down.h+e);break}const s=Object.fromEntries(o);if(s.w!==void 0&&s.w<=100||s.h!==void 0&&s.h<=100||s.w!==void 0&&s.w>=1e3||s.h!==void 0&&s.h>=1e3)return;const i=this.down.target;i.SetData(s),i.Render()}CheckCollisionEdge(){const t=r.SpaceX(this.move.x),e=r.SpaceY(this.move.y),o=r.status.hover,s=r.GetCollisionChildPoint(t,e);s!==o&&(r.status.hover=s,this.loop.isDraw=!0,this.Loop(null));let i="default";if(s!==null)switch(s.GetCollisionEdge(t,e)){case"e":case"w":i="ew-resize";break;case"s":case"n":i="ns-resize";break;case"es":case"wn":i="nwse-resize";break;case"en":case"ws":i="nesw-resize";break;default:i="move";break}this.parentNode.style.setProperty("cursor",i,"important")}};const Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAVRJREFUeJzt3LFNw0AYgFGDmIEZaCIWoGUKeoaiZwpaFkBpmIEloEkKIgoMPr7EvCe5vST3RdZvRblpAgAAADhJ77uLGc4WWudw45dad/XO6zfw3wkQEyAmQEyA2Nxp5TdjpsnoC3M2ZYkZX4QDbkExt6CYJ+GYW1BMgJgAMQFiAqyIH2R+YMi4eL3ZrDLEy3Z7/OP1bvNXex31l2vtm7+/loxwsdRCh26vbkYtnXl6fV58zWEB9h7u3ka/xHD3j5fD1h46hq5h86dp7OfwHBATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQEyAmQEyAmAAxAWICxASICRATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQGxpg5F/8/9LIzzH8rIi1RBhlWIARJ4vwDWs/M2jpA5scWTbTSRxbBgAAAAAAn30A4fLQgWRlXGAAAAAASUVORK5CYII=",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAeBJREFUeJzt2U1SwkAQhuHWcok3wBWeAFZQcHuq3HkCXOENcD8urNGpVCIkM0x3pt/nAPz0l/4CExEAAAAAAAAAAAAAAAAAwHydzpdwOl+C9udwa73fhhBCIIg/TxpvulouRORnI0REXl+eHzQ+h0txC1JxIzxuhcoGdMWNEPG3FSYCSFFPFfTV0JDW68ncBnS1Xk/mA0i1WE+zCiDqBiHSRhhVjbkPjLlXaH+vsWa5AX3mWk/NBBBRTyOUrqE51lNzG9DHcj25CCCinnrUqiGr9eRqA/po19NjzTezbLVcyGq5kNP5Etb7rckb9t1o11Cq9vDZgMTmsJP34xsVpEFj+KZo1pBm57vfAO0r33UA2sMXcRyAheGbU+s+YOl3vrsNsHbluwrg4/PL1PBNuncNWXsu4GoDROT3vEf7c0TuAhCxF4I5NR9Van9XlxsQWdgE1wGI2AjBpLE1lFtbWiE0sQHxz9XmsJv8GmxCx61XdPdYYa6bYM4tgxw60yGEQv4b5LUDNUIoYGiIt55mEkKmvgGOPUomhEzpAKee4xNChji83IcoU0Ow9PBGxXq/LTaEKX/uSrwvElP/X6CgayEw/Apyf+KigG4IDF9BqV9ZyMDwAQAAAAAAAAAAAAD38A2ZOL2SNKZ2wgAAAABJRU5ErkJggg==",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAedJREFUeJztnDFuwzAMRdWiXXuc3H/ucbJmSJcaBYIGjm2Jj5TfG7NY5ucnJSpJayIiIiIiIiIiIiIiIom5XS/32/Vyp9dxhHd6AWfnjV7AXh4z//Pru+S76ACYaQSo2gtKClA12P9RUoCZKNe41rK/WjPWATClsuXV2l/JBToApkymbN35VHGBDoApkSV79/0VXKADYNJnyNFTb3YX6AAYBYBJbc9eQ7fMZUgHwKTNjN4j56wu0AEweFbQlyu0Mw4/nA4gzVEBLUEwXex3Vhf0KF9d699ZhOjZN7o3oNlF6N20h+wAZhVhxI5p2BZsNhFGbVeH7oFnEWHkWSHkEFJViIhDWtgpsJoIUSfk0GN4FREixxPhc5DsIkTPhpBBVFYRiMEcNgnMJgI1FUVHsVlEIEfS3gfA9wGOo2EUAEYBYGzCje0DOgBGARrrREyALOWHRgfAKMAvlCMRASw/f+gAmLL3AY9796q/JfiIfFgPngVo+bxaeSvjgK2ZeUSIaa8k9wTlaDCIZ24hdRPuEQh63r9GSgeMCtoWN0z3tZRXXj7qpTOtJU0JiiwVmcoSnnF0MOi1YecAOvAL9Pkh3AFZAv+M6H/kHd4DKgW/tfg1hjXhCsFfqLRWERERERERERERERERWeEHFjPJPzQ9OhwAAAAASUVORK5CYII=",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAABEFJREFUeJztnb9q40AQxieXqwyBFAEHl1cmnTtjg17Kj5GXMlxId51dujx84MIQSBd0hZl4T2dZ++cb7aw1v+rgLGl2vp3V7uxoQ2QYhmEYhmEYvXOT2wBfpotZHfL7Xz/fimjb99wG+HJ3Ow+84k3EDjTFCEBE9PT84fW7zXokbAmOb7kN8CF0+Im9JgdFCHB3O/fu/UTHSAkfsvJQhADXjAmQGfUCpIzlJbwHxARANT50/GeQ7wFJIUUEYIOralnn7sGpz6+qZY2y5Rzw1SIbyj2X5+Tvn69E1L1CdRvKPTgmAojov2f7PJ9tcJ+9WY+87Q8FerOm811cZ5xrhHstE+v4Ju7C7JIjm45v3kNCBNiNLjnfpdmQpuNRTr/0fCJqtSHEdoQ9kJv4NoBxndCX41E2oEVIvkGo810261HvjkfYgBQh6eIU55cOSoTkCKiqZT005zOb9YhWq5ckHyavA94/X4tK/6JwIyCFZAFK2XmSANF2yEp4aFGAGHoYiABDigLU0MPAckFDiwIU8FTENU9JufcjI179fsC1I5INlYyCw3538f/vHx5FnivR+4kKGoJcx//+8+Psbybj7de/JYSQEEF9XRA73nV62xSQN0+OHMWQiggU0HQ0svc3HR8672YxOCpQQqCjQGUEuM6PXfDwdVW1rCfjLR32O5XRANsPQPX+w34X3evbcKMBIQIyClRFADsf5XjGjQYijAgo1KwDuqaXpT6ri2QBkMOPRO93Wa1ebtqmsCFwzRGiVCW6sW4FARsVi9TQ0wa/mFOGomalRez7wPsd0HQ4Uf8b6Zpw275Zz6mq5l/RECJIZ5GURJ2OS9+9n0FEQRsh0eEVAUPu6TGwv3zS81lnQRpmI7ltyD4NzTH8EOFmRKlkF2DomACZMQEyYwJkxgTITHYBJuNtYyerH3ghlpusAmhIC+e2wWslzCs6WxH7EVKg5r0AkkzGlZgNdWk6PCQZ550NPd7wdATMdDGrN2vZRJ1mUOloyCdKiA2ZvqIA1ftR+8KQ7wNQhbnSMyLUzAe5KZ99Gsr0ORvJPfNxUVUVcXTMKQq0lqUgUVkZhyjMYtxhR1tNEJGyCGDuHx7psN/9807QUpqIRn11dGxxroTjB1kdfXLgafbSNlOSLk+XwD7Q8GTwH2howL4Ru0JUTkM1g44CSAQMxfkS2BAUCPpUXogAQ+v9T88fsKQh5PsAhCElgmh7sgBD6/0MaiiyI8siQR1ZlhQB/ODYDRkNp6vE2q3i0D7Gjq2Mp9eDW7sOTSWyg1uT6Dq6uOvYYL6WsaOLI2g7vNt3Q8UO7wbgipCSN0lNcaTmbfj5Us4nEvxDbtPFrEYYnHIwLOp0Q1RbzqH+tMPYKJDaQEGjPhmX4kDtzicqQIBrxwTITBEChKY60KfbSlKEADFjeQnjP1EBdUEuGpJ3aIoRoJQhxTAMwzAMwzAK4C+ZeT3j3R9QKgAAAABJRU5ErkJggg==",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAetJREFUeJzt3EFKw0AUh/EqHkREegIXCj2DIOLeO7h16bZ3ELciBc8guPEEUsSb6CrQloY2k9f5JpPvtyktJoT3n5dJJsTJRJIkSZIkSUrzRx/A0BwF7mu1+JH7rdoxfQBjZwAwA4D1OVd3mXCdE1qkFiblascQtrADYF6GwpyEYQYAM4DKuBakYQm5Wjk7vXDkr/j5/dq7rs4BsJPInV1dv0XubnA+3287b2MHwAwAZgAwA4AZAMwAYAYAMwCYAcBC74RzeH6667X9/eNr0JHEsANgBgAzAJgBwAwAZgAwA4AZAKyoG7Gbj5u174vZAjqSfIoIYLPwm7/XHAQaQFvh2/4uMojldD45/34I218qbA7Yt/h9t9lmOZ2vfZKchGFIAFEjOcXmqKe7YFQdMHu53Po7GUL2AMjRX6LRdEDb6G9QXTCKAHYVv0GEMIoASpY9gNx3tfuO/kbuLrADYEgAubqg6+hv5OyCajsgtfiNXCFgAaR0QY2roqEv6aW+orTr5qxr4SNHb5cV0+YVpS4v6RXxPKApcMQDmehTx6GXrYsIoFHjKWaXqibhQ02ch5yQqwpgiIo6BfVVwiPGruwAmAHADABmADADgBkAzABgBgAzAJgBwEKXIlL+ZdfY2QGSJEmSJEmSJNXvHxGGYJKsrivNAAAAAElFTkSuQmCC",M=""+new URL("remove-Bp_BGg2G.png",import.meta.url).href,U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAvJJREFUeJztnL1qG0EUhU9CGgfyBEa4DUkpkEuZNIG0UpsHiMGdHyNdwH4At3YbSCPsMoItE9wGoScQRGVSrbNsdnZ3Zu7dO6M9XyUk7czofPOzM4IFCCGEEEIIIUMzn1+eWNb/3LJyQsjYeWbdAF/m88s/rs8eHj5n93uyanBb+CW5SeAibAwFGEMBxlCAMRRgDAUYQwHGUIAxFGAMBRhDAcZQgDFJHVz1OWyLJbXDOo4AYyjAmKSGI6A7DaU2/QCBAj6dn6vO1T9/vBQv883b3+Jl1rm+uvLO0/uCMvxvX9e+l3oxOTkTK2vz616sLBfvP8wA+EsIWgO0wwfkQhsifCA8kxexFS/3m9gi3Dze4Pvrj8GXnz7e4FSwOU3cHk2iro8SUIY/Oz6OakQbs90KX169877uYrcCFNsFAOvtFsv9JkpC9G2oZvglF7uV6vdDkfjt2ewD+oY6VPhSZCMA6A43t/CBzAQA7pBzDB/IUADwf9i5hg8I3IZakXPoVbIcAYcEBRhDAcZQgDGDLMKLonh6fTedNr7vovr9tnL70FZWW3ld18WQ/AhYFIV30NJ1aNafvABt+oar1RFGLUB7ZPUhmY1Y0zxbDWhRFK1zscQ83dUGDZIeAZqLXz1YV13196WFJC1gKDRFd0EBPagKkpaVzBowJK59SRtaoyRpAT7zbdd3LaeZNpIRkGuAsSQjIDXaOoRkZ8hiET7U3g9kMAKsF0ltkhGQa4CxiAkIubWz4m46fWqv64hDewdcksUacMhQAGxPRVUE1E8xU6Rpimlqq/YfQmJrQHVeBZqDH/J0s4k+9Q/dYUY9BYV0COlONGoBgF+gGiNYdB9QNrDvnx2p4Gp3/XMNVDZiQ+1epYOx6Cijn4KsoQBjKMAYCjCGAoyhAGMowBgKMIYCjKEAYyjAmGgB6+1Woh1ZIvHbow7jbo8mWO43o5Zg+rwgiQaMnaApqHw+GvlHaCZJPjUxV0KemkgIIYQQQgghhBBCxsNfQOTmge3/KbkAAAAASUVORK5CYII=",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAATdJREFUeJzt3LFRw0AQhlGJoRCGGkhowgl1ktAEAbQAuJMjwYwGBIFl33/jfS/XzFqf92wH8jQBAAAAAACXbj72wtubu3bKQXp5378e/ZrP4XrLxfe7x1PN0cXz00N6hF+u0gNUJ0CYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQVuox1bePl2me56EeUx1qmHNrrX2/aUYJUfYIWsZIKhtgmsaIMMQa9vTXTU8dSaU3YCm1DTZgRc9tsAErem6DACt6bsCmv6u5NIkP4nIbMMoPsINyAf6T+CZUPkB6I0oHONz8ZYTeWzDUeZj088anN6Ok9iU9BwAAAAAAAAAAABt8AoH5O2No2c3rAAAAAElFTkSuQmCC",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAatJREFUeJzt3DFOwzAYhuHfCIlObOxIDPQEnbqhHoA7dGXhICxdewfYERtTTwBDJRYuwNROZjKK2lCq2M4X7PdZAip1Ir+1gaiqGQAAAAAAAAAAAAAAAIDSuK5PnI2nPuWFDNXz22vnOTpGp8Fn46lfbzapr2WQrkajrBFOYwd4uf1KcR2Dc/N43st5TmKeXOrkm5ndTc56OU9UAMQjgBgBxAggFv1XUHD58J5qKImP+2vJeVkBYgQQI4BYst8BbZzb/w/e+/1bSM45897/HGuSNYBZ+4Qf87O1xJBtQc65vRUSvt89lix7gDDRzckMX4dtZ1d45dewAmRbUHOSa3il/0a6BTWPtep1C2puPeGxQ9tMDXGybkGHJrf5WNueX8P+b5YxwHyZdrzlPO14Q5EtQKkTlhq3IsSSrQDV7dz/jhUgRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBCLCvD0eZHqOqoV9b6gxWprNikzwmK17eU80W/M6utCS8UHNv0h9wc2AQAAAAAAAAAAAAAAlOkb2c1enlwLpzkAAAAASUVORK5CYII=",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAipJREFUeJzt3NtygzAMRVGl0///5fSlzHg8Bt9kS0Z7vbWEAOeUAIZGBAAAAAAAAAAi+FivQMU3+9n7+nbzukF58Cmv6zzE48Y8hX/xuN5DfqxXINMS/qt4KiBc+CJ+CggZvoiPAsKGL2JfQOjwRWwLCB++iF0BhP/PogDCT+wugPAzOwsg/IJdBRD+jR1jKm8NXyW71QW8NfzUVIYrC4gQ/mU4x1XHgEjhT1lRAOF30C6A8DtpFkD4A7QKIPxBGgUQ/oTZAgh/0kwBhK/A+o5YeBRgjAKMzRTwmqfTLM3uAZQwSeMjiBImaB0DKGGQ5kGYEgZonwVRQqcVp6GU0GHVdQAlNOKm/Dy3N+Uvby3hiMdSLtolvOYjbtdY0GsC07ZzMI4SCnaPhlJCxmI4mhISVvcDKOGf5Q0ZShD7O2LhS7AuQCR4CR4KEAlcgpcCRIKW4KkAkYAleN1gvrDJCb6ybEAaWu39r9fuDNZimbe8HQPCoQBjFGCMAoz9Wq/AjfxAXjotbT3At76+Nv/Ie1SdsAeM3E8uzdP6Pt/BZQ45oYA7dyE9hVcLdnZ6N68fQbl01+8N+PMwrXWZ6fzfwrRhJ+wB+ca2bvwne23+c652Abnkwu2EAp4c/9DX6QUcj6ejjbEHGFtdwMwp4Ypl91wLbLHj/wNqQez62rRaqL1X1ip2XQfs+osqnfO3DGuUph8/FFE7765Nn112y+/u5uVEAgAAAAAAAOr+ADC0RoKON1dbAAAAAElFTkSuQmCC",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAilJREFUeJztnMuOwyAMAN1V//+Xu4cqKk3zIMbYVjxzqbopATwkOLCKCAAAAAAAAAAAAEAFHtENmMRr9T1tP9M2bIB18FvS9TddgwY5Cv5Cqj7/RTcggB5JblQUIJJIQlUBIkkkVBYgkkBCdQEiwRIQ8CZMAgI+hEhAwDfuEhDwi6sEBGzjJgEB+7hIsFoXCc+nJzJ17Wj05HcOfMs0CSMnrhL8hSkSmAP6mTLgEHANcwkIuI6pBAToMJOAAD0mEhAwxrAEBIwzJAEBNqglICAYBASDgGAQYIN6nQgB4wwt0iFgjOEVUgToMVmeRoAOs70BBFzHdGMGAdcw3xVDQD9TtiTZlO8j5aZ8y51FpP63lGxYD4Tp8WEO2MdlcCJgG7c7AwJ+cb0tI+Ab9zkRAR9CEhIEvAnLBhEQnIpXFxD+HFRZQHjwReoKSBF8kZoC0gRfJFljjOCFTQnglWUN2d5itbQnhZQsc8Cd9xMOeTrWtTfiXs1nilHpSYYroFzQWzIIKA0CgvGcA0bRpJYWZXrLqcgg4CwD2jt+lE6eldEcmyLBU4BFqtkGofd8VmWmSMg0B5yN5PXxx8ZvtPTUM4UsAs46qQ2CazA1RD6IXRm5t31SjrwCNPfm25EhC+oh3a3Diug5oPxVEC2gF62cdbl0krMLOLpCXht/m1XPNDw3ZI7qOsrD18dbes/Z/l7zBH1Wl5rsV8CCpvOWZW6bBAAAAAAAAABAKf4BpbVHjNWRULYAAAAASUVORK5CYII=";let J=class{parentNode;display;remote={btn:null,id:null,type:null,data:null};constructor(t={}){this.parentNode=t.parentNode||document.body,this.display=new F({parentNode:this.parentNode}),this.AddText("Pointer"),this.AddButton("pointer","toggle","포인터",O),this.AddButton("multiselect","toggle","그룹선택",T),this.AddButton("editortext","toggle","텍스트편집",P),this.AddLine(),this.AddText("Add Diagram"),this.AddButton("square","toggle","도형1",Q),this.AddButton("picture","toggle","그림도형",Y),this.AddLine(),this.AddText("Files & System"),this.AddButton("favorate","action","즐겨찾기",G),this.AddButton("setting","action","환경설정",S),this.AddButton("remove","toggle","도형삭제",M),this.AddButton("imagedownload","action","화면캡처",U),this.AddLine(),this.AddText("Undo & Redo"),this.AddButton("undo","action","작업 복원하기(뒤)",z),this.AddButton("redo","action","작업 복원하기(앞)",L)}AddLine(){const t=document.createElement("hr");t.classList.add("line"),this.parentNode.appendChild(t)}AddText(t){const e=document.createElement("small");e.classList.add("small"),e.innerText=t,this.parentNode.appendChild(e)}AddButton(t,e,o,s){const i=document.createElement("div");i.classList.add("button"),i.classList.add(e),s&&(i.style.backgroundImage=`url(${s})`),this.parentNode.appendChild(i),i.addEventListener("click",()=>{this.remote.id!==null?this.remote.type==="toggle"&&this.remote.id===t?this.End():(this.End(),this.Start(i,t,e,o,s),e==="action"&&this.Action()):(this.Start(i,t,e,o,s),e==="action"&&this.Action())})}Start(t,e,o,s,i){t.classList.add("menu_select"),this.display.text=s,this.remote.btn=t,this.remote.id=e,this.remote.type=o,document.body.style.setProperty("cursor",`url(${i}), auto`,"important")}async Action(t={}){switch(this.remote.id){case"square":console.log(`[설치] 좌표 (${t.x}, ${t.y}) 에 사각형 생성`),await w.AddDiagram("square",t.x,t.y);break;case"favorate":console.log("즐겨찾기 실행");break;case"imagedownload":console.log("화면 캡처 시작");break;case"editortext":H.Open("바꿔보자");break;case"undo":await w.Undo(),h.loop.isDraw=!0,h.Loop(null);break;case"redo":w.Redo();break;default:console.log("실행:",this.remote.id);break}this.End()}End(){this.remote.btn&&(this.remote.btn.classList.remove("menu_select"),this.display.text=`
`,this.remote.btn=null,this.remote.id=null,this.remote.type=null,document.body.style.removeProperty("cursor"))}};class F{parentNode;div;down=null;constructor(t={}){this.parentNode=t.parentNode||document.body;const e=document.createElement("div");this.div=e,e.classList.add("display"),e.innerText=`
`,this.parentNode.appendChild(e),e.addEventListener("pointerdown",s=>{e.setPointerCapture(s.pointerId),this.down={x:s.offsetX,y:s.offsetY}}),e.addEventListener("pointermove",s=>{if(!this.down)return;const i=s.clientX-this.down.x,n=s.clientY-this.down.y;this.parentNode.style.left=`${i}px`,this.parentNode.style.top=`${n}px`});const o=s=>{this.down=null,e.releasePointerCapture(s.pointerId)};e.addEventListener("pointerup",o),e.addEventListener("pointercancel",o)}set text(t){this.div.innerText=t}}class X{queue=[];nowOrder=-1;constructor(){}Exec(t,e){const o=this.nowOrder+1;this.queue=[...this.queue.slice(0,o),{commandID:t,mementos:e}],this.nowOrder=this.queue.length-1,console.log("[Exec]",this.queue,this.nowOrder)}Redo(){if(this.nowOrder>=this.queue.length-1)return;this.nowOrder+=1;const t=this.queue[this.nowOrder];console.log("[Redo]",t)}async Undo(){if(this.nowOrder<0){this.nowOrder=-1;return}const t=this.queue[this.nowOrder];for(let e of t.mementos){const o=e.old,s=e.now;o===null&&(s===null||(await m.Call("deleteDiagram",s.serialize),r.DeleteChild(s),console.log("삭제했다")))}this.nowOrder-=1,console.log("[Undo]",t,this.nowOrder)}async AddDiagram(t,e,o){const s=r.AddChild({type:t,x:e,y:o,id:crypto.randomUUID(),parentID:r.id,tabID:r.tabID,zIndex:Date.now()});if(!s)return;await m.Call("saveDiagram",s.serialize);const i={old:null,now:s};this.Exec("AddDiagram",[i])}}const b=document.querySelector("#app"),m=new R,H=u(x,"tedi"),r=u(k,"view"),h=u(y,"controller"),c=u(J,"remocon"),w=new X,C=document.createElement("div");C.id="remocon_reset_pos";b?.appendChild(C);C.onclick=()=>{c.parentNode.style.left="10px",c.parentNode.style.top="30px"};const j=async()=>{const d=await m.Call("loadSetting",{});d?.openTabID&&await r.LoadMap(d.openTabID)};j();function u(d,t){const e=document.createElement("div");return e.id=t,b?.appendChild(e),new d({parentNode:e})}

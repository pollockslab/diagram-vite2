(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();function p(d){return new Worker(""+new URL("idb.worker-DvAD-bDS.js",import.meta.url).href,{name:d?.name})}let m=class{worker;seq=0;pending=new Map;constructor(){this.worker=new p,this.worker.onmessage=t=>this.Message(t.data)}Message(t){const{id:e,ok:s,result:o,error:i}=t,n=this.pending.get(e);n&&(this.pending.delete(e),s?n.resolve(o):(n.reject(i),console.warn(t)))}Call(t,e){return new Promise((s,o)=>{const i=++this.seq;this.pending.set(i,{resolve:s,reject:o}),this.worker.postMessage({id:i,type:t,payload:e})})}},f=class{type="none";id=null;parentID=null;tabID=null;zIndex=null;x=0;y=0;w=0;h=0;_capture;constructor(){const t=document.createElement("canvas"),e=t.getContext("2d");this._capture={cav:t,ctx:e}}SetData(t={}){Object.assign(this,t),t.w&&(this._capture.cav.width=t.w),t.h&&(this._capture.cav.height=t.h)}},w=class extends f{bgColor;constructor(t){super(),this.type="square",this.bgColor=t.bgColor||"black",this.SetData(t),this.Render()}Save(){}Render(){const t=this._capture.cav,e=this._capture.ctx;e.fillStyle=this.bgColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height)}Draw(t){const e=this._capture.cav;t.drawImage(e,this.x,this.y)}};const E={square:w};let v=class{parentNode;scope={min:.5,max:2,zoom:1,w:0,h:0,dpr:Math.round(window.devicePixelRatio)||1,backgroundTileStep:100};x=0;y=0;children={none:[],point:[],square:[],line:[],button:[]};isDragging=!1;isResizing=!1;layers={};constructor(t={}){this.parentNode=t.parentNode||document.body,this.InitLayers(),window.addEventListener("resize",()=>{this.Resize()}),this.Resize(),this.Loop()}get zoom(){return this.scope.zoom}set zoom(t){t>=this.scope.min&&t<=this.scope.max&&(this.scope.zoom=t)}Loop=()=>{(this.isDragging||this.isResizing)&&(this.Draw(),this.isDragging=!1,this.isResizing=!1),requestAnimationFrame(this.Loop)};InitLayers(){["background"].forEach(t=>{const e=document.createElement("canvas"),s=e.getContext("2d");e.style="position:absolute; width:100%; height:100%;",this.parentNode.appendChild(e),this.layers[t]={cav:e,ctx:s}})}Resize(){this.scope.w=window.innerWidth,this.scope.h=window.innerHeight,Object.values(this.layers).forEach(t=>{t.cav.width=this.scope.w*this.scope.dpr,t.cav.height=this.scope.h*this.scope.dpr}),this.isResizing=!0}SpaceLine(t){return t/this.zoom}async LoadMap(t){console.log(t),this.children={none:[],point:[],square:[],line:[],button:[]},this.isResizing=!0}AddChild(t){if(typeof t.type!="string")return;let e;t.type==="square"&&(e=new E.square(t),this.children.square.push(e))}FindByID(t){const e=Object.values(this.children);for(const s of e){const o=s.find(i=>i.id===t);if(o)return o}return null}Draw(){const t=this.scope.w,e=this.scope.h,s=this.scope.dpr,o=this.scope.zoom;Object.values(this.layers).forEach(n=>{const c=n.ctx;c.setTransform(s,0,0,s,0,0),c.clearRect(0,0,t,e),c.translate(t/2,e/2),c.scale(o,o),c.translate(-this.x,-this.y)}),this.DrawBackground(),["none","point","square","line","button"].forEach(n=>{const c=this.children[n];if(!(c.length<=0))for(const A of c)A.Draw(this.layers.board.ctx)})}DrawBackground(){if(!this.layers.background||this.scope.zoom<.5)return;const t=this.layers.background.ctx,e=this.scope.backgroundTileStep,s=this.SpaceLine(this.scope.w),o=this.SpaceLine(this.scope.h),i=s>o?s:o,n=this.x-i/2-this.x%e,c=this.y-i/2-this.y%e;t.save(),t.strokeStyle="rgb(54,63,63)",t.beginPath();const A=e;for(let r=n-A;r<i+n+A;r+=e)t.moveTo(r-A,c-A),t.lineTo(r+A+i,c+A+i),t.moveTo(r-A,c+A+i),t.lineTo(r+A+i,c-A);for(let r=n+A;r>-i+n-A;r-=e)t.moveTo(r-A,c-A),t.lineTo(r+A+i,c+A+i),t.moveTo(r-A,c+A+i),t.lineTo(r+A+i,c-A);t.stroke(),t.restore()}};const I=.001,R=.002;let C=class{down=null;pinch=null;touchMode=null;constructor(t){const e=t.parentNode;e.addEventListener("contextmenu",s=>{s.preventDefault()}),e.addEventListener("wheel",s=>{a.zoom-=s.deltaY*I,a.isDragging=!0},{passive:!0}),e.addEventListener("mousedown",s=>{this.PanStart(s.offsetX,s.offsetY,s.timeStamp)}),e.addEventListener("mousemove",s=>{this.PanMove(s.offsetX,s.offsetY)}),e.addEventListener("mouseup",s=>{this.PanEnd(s.offsetX,s.offsetY,s.timeStamp)}),e.addEventListener("mouseleave",()=>{this.down=null,this.touchMode=null}),e.addEventListener("touchstart",s=>{if(s.touches.length===1&&this.touchMode!=="pinch"){const o=s.touches[0];this.touchMode="pan",this.PanStart(o.clientX,o.clientY,s.timeStamp)}if(s.touches.length===2){const o=s.touches[0],i=s.touches[1],n=o.clientX-i.clientX,c=o.clientY-i.clientY;this.touchMode="pinch",this.pinch={dist:Math.hypot(n,c)}}},{passive:!1}),e.addEventListener("touchmove",s=>{if(this.touchMode==="pan"&&s.touches.length===1){const o=s.touches[0];this.PanMove(o.clientX,o.clientY),s.preventDefault()}if(this.touchMode==="pinch"&&s.touches.length===2&&this.pinch){const o=s.touches[0],i=s.touches[1],n=o.clientX-i.clientX,c=o.clientY-i.clientY,A=Math.hypot(n,c),r=this.pinch.dist-A;this.pinch.dist=A,a.zoom+=r*R,a.isDragging=!0,s.preventDefault()}},{passive:!1}),e.addEventListener("touchend",s=>{if(this.touchMode==="pinch"&&s.touches.length<2){this.touchMode=null,this.pinch=null;return}if(this.touchMode==="pan"&&s.touches.length===0){const o=s.changedTouches[0],i=e.getBoundingClientRect(),n=o.clientX-i.left,c=o.clientY-i.top;this.touchMode=null,this.PanEnd(n,c,s.timeStamp)}})}PanStart(t,e,s){this.down={offsetX:t,offsetY:e,xView:a.x,yView:a.y,timeStamp:s},a.isDragging=!0}PanMove(t,e){if(!this.down)return;if(h.remote.id===null){const o=a.SpaceLine(t-this.down.offsetX),i=a.SpaceLine(e-this.down.offsetY);a.x=this.down.xView-o,a.y=this.down.yView-i,a.isDragging=!0}}async PanEnd(t,e,s){const o=this.down?.timeStamp??0,i=s-o<200,n=h.remote.id;i&&n!==null&&h.Action({x:t,y:e}),this.down=null,a.isDragging=!1}};const N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAVRJREFUeJzt3LFNw0AYgFGDmIEZaCIWoGUKeoaiZwpaFkBpmIEloEkKIgoMPr7EvCe5vST3RdZvRblpAgAAADhJ77uLGc4WWudw45dad/XO6zfw3wkQEyAmQEyA2Nxp5TdjpsnoC3M2ZYkZX4QDbkExt6CYJ+GYW1BMgJgAMQFiAqyIH2R+YMi4eL3ZrDLEy3Z7/OP1bvNXex31l2vtm7+/loxwsdRCh26vbkYtnXl6fV58zWEB9h7u3ka/xHD3j5fD1h46hq5h86dp7OfwHBATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQEyAmQEyAmAAxAWICxASICRATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQGxpg5F/8/9LIzzH8rIi1RBhlWIARJ4vwDWs/M2jpA5scWTbTSRxbBgAAAAAAn30A4fLQgWRlXGAAAAAASUVORK5CYII=",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAeBJREFUeJzt2U1SwkAQhuHWcok3wBWeAFZQcHuq3HkCXOENcD8urNGpVCIkM0x3pt/nAPz0l/4CExEAAAAAAAAAAAAAAAAAwHydzpdwOl+C9udwa73fhhBCIIg/TxpvulouRORnI0REXl+eHzQ+h0txC1JxIzxuhcoGdMWNEPG3FSYCSFFPFfTV0JDW68ncBnS1Xk/mA0i1WE+zCiDqBiHSRhhVjbkPjLlXaH+vsWa5AX3mWk/NBBBRTyOUrqE51lNzG9DHcj25CCCinnrUqiGr9eRqA/po19NjzTezbLVcyGq5kNP5Etb7rckb9t1o11Cq9vDZgMTmsJP34xsVpEFj+KZo1pBm57vfAO0r33UA2sMXcRyAheGbU+s+YOl3vrsNsHbluwrg4/PL1PBNuncNWXsu4GoDROT3vEf7c0TuAhCxF4I5NR9Van9XlxsQWdgE1wGI2AjBpLE1lFtbWiE0sQHxz9XmsJv8GmxCx61XdPdYYa6bYM4tgxw60yGEQv4b5LUDNUIoYGiIt55mEkKmvgGOPUomhEzpAKee4xNChji83IcoU0Ow9PBGxXq/LTaEKX/uSrwvElP/X6CgayEw/Apyf+KigG4IDF9BqV9ZyMDwAQAAAAAAAAAAAAD38A2ZOL2SNKZ2wgAAAABJRU5ErkJggg==",y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAedJREFUeJztnDFuwzAMRdWiXXuc3H/ucbJmSJcaBYIGjm2Jj5TfG7NY5ucnJSpJayIiIiIiIiIiIiIiIom5XS/32/Vyp9dxhHd6AWfnjV7AXh4z//Pru+S76ACYaQSo2gtKClA12P9RUoCZKNe41rK/WjPWATClsuXV2l/JBToApkymbN35VHGBDoApkSV79/0VXKADYNJnyNFTb3YX6AAYBYBJbc9eQ7fMZUgHwKTNjN4j56wu0AEweFbQlyu0Mw4/nA4gzVEBLUEwXex3Vhf0KF9d699ZhOjZN7o3oNlF6N20h+wAZhVhxI5p2BZsNhFGbVeH7oFnEWHkWSHkEFJViIhDWtgpsJoIUSfk0GN4FREixxPhc5DsIkTPhpBBVFYRiMEcNgnMJgI1FUVHsVlEIEfS3gfA9wGOo2EUAEYBYGzCje0DOgBGARrrREyALOWHRgfAKMAvlCMRASw/f+gAmLL3AY9796q/JfiIfFgPngVo+bxaeSvjgK2ZeUSIaa8k9wTlaDCIZ24hdRPuEQh63r9GSgeMCtoWN0z3tZRXXj7qpTOtJU0JiiwVmcoSnnF0MOi1YecAOvAL9Pkh3AFZAv+M6H/kHd4DKgW/tfg1hjXhCsFfqLRWERERERERERERERERWeEHFjPJPzQ9OhwAAAAASUVORK5CYII=",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAABEFJREFUeJztnb9q40AQxieXqwyBFAEHl1cmnTtjg17Kj5GXMlxId51dujx84MIQSBd0hZl4T2dZ++cb7aw1v+rgLGl2vp3V7uxoQ2QYhmEYhmEYvXOT2wBfpotZHfL7Xz/fimjb99wG+HJ3Ow+84k3EDjTFCEBE9PT84fW7zXokbAmOb7kN8CF0+Im9JgdFCHB3O/fu/UTHSAkfsvJQhADXjAmQGfUCpIzlJbwHxARANT50/GeQ7wFJIUUEYIOralnn7sGpz6+qZY2y5Rzw1SIbyj2X5+Tvn69E1L1CdRvKPTgmAojov2f7PJ9tcJ+9WY+87Q8FerOm811cZ5xrhHstE+v4Ju7C7JIjm45v3kNCBNiNLjnfpdmQpuNRTr/0fCJqtSHEdoQ9kJv4NoBxndCX41E2oEVIvkGo810261HvjkfYgBQh6eIU55cOSoTkCKiqZT005zOb9YhWq5ckHyavA94/X4tK/6JwIyCFZAFK2XmSANF2yEp4aFGAGHoYiABDigLU0MPAckFDiwIU8FTENU9JufcjI179fsC1I5INlYyCw3538f/vHx5FnivR+4kKGoJcx//+8+Psbybj7de/JYSQEEF9XRA73nV62xSQN0+OHMWQiggU0HQ0svc3HR8672YxOCpQQqCjQGUEuM6PXfDwdVW1rCfjLR32O5XRANsPQPX+w34X3evbcKMBIQIyClRFADsf5XjGjQYijAgo1KwDuqaXpT6ri2QBkMOPRO93Wa1ebtqmsCFwzRGiVCW6sW4FARsVi9TQ0wa/mFOGomalRez7wPsd0HQ4Uf8b6Zpw275Zz6mq5l/RECJIZ5GURJ2OS9+9n0FEQRsh0eEVAUPu6TGwv3zS81lnQRpmI7ltyD4NzTH8EOFmRKlkF2DomACZMQEyYwJkxgTITHYBJuNtYyerH3ghlpusAmhIC+e2wWslzCs6WxH7EVKg5r0AkkzGlZgNdWk6PCQZ550NPd7wdATMdDGrN2vZRJ1mUOloyCdKiA2ZvqIA1ftR+8KQ7wNQhbnSMyLUzAe5KZ99Gsr0ORvJPfNxUVUVcXTMKQq0lqUgUVkZhyjMYtxhR1tNEJGyCGDuHx7psN/9807QUpqIRn11dGxxroTjB1kdfXLgafbSNlOSLk+XwD7Q8GTwH2howL4Ru0JUTkM1g44CSAQMxfkS2BAUCPpUXogAQ+v9T88fsKQh5PsAhCElgmh7sgBD6/0MaiiyI8siQR1ZlhQB/ODYDRkNp6vE2q3i0D7Gjq2Mp9eDW7sOTSWyg1uT6Dq6uOvYYL6WsaOLI2g7vNt3Q8UO7wbgipCSN0lNcaTmbfj5Us4nEvxDbtPFrEYYnHIwLOp0Q1RbzqH+tMPYKJDaQEGjPhmX4kDtzicqQIBrxwTITBEChKY60KfbSlKEADFjeQnjP1EBdUEuGpJ3aIoRoJQhxTAMwzAMwzAK4C+ZeT3j3R9QKgAAAABJRU5ErkJggg==",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAetJREFUeJzt3EFKw0AUh/EqHkREegIXCj2DIOLeO7h16bZ3ELciBc8guPEEUsSb6CrQloY2k9f5JpPvtyktJoT3n5dJJsTJRJIkSZIkSUrzRx/A0BwF7mu1+JH7rdoxfQBjZwAwA4D1OVd3mXCdE1qkFiblascQtrADYF6GwpyEYQYAM4DKuBakYQm5Wjk7vXDkr/j5/dq7rs4BsJPInV1dv0XubnA+3287b2MHwAwAZgAwA4AZAMwAYAYAMwCYAcBC74RzeH6667X9/eNr0JHEsANgBgAzAJgBwAwAZgAwA4AZAKyoG7Gbj5u174vZAjqSfIoIYLPwm7/XHAQaQFvh2/4uMojldD45/34I218qbA7Yt/h9t9lmOZ2vfZKchGFIAFEjOcXmqKe7YFQdMHu53Po7GUL2AMjRX6LRdEDb6G9QXTCKAHYVv0GEMIoASpY9gNx3tfuO/kbuLrADYEgAubqg6+hv5OyCajsgtfiNXCFgAaR0QY2roqEv6aW+orTr5qxr4SNHb5cV0+YVpS4v6RXxPKApcMQDmehTx6GXrYsIoFHjKWaXqibhQ02ch5yQqwpgiIo6BfVVwiPGruwAmAHADABmADADgBkAzABgBgAzAJgBwEKXIlL+ZdfY2QGSJEmSJEmSJNXvHxGGYJKsrivNAAAAAElFTkSuQmCC",x=""+new URL("remove-Bp_BGg2G.png",import.meta.url).href,D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAvJJREFUeJztnL1qG0EUhU9CGgfyBEa4DUkpkEuZNIG0UpsHiMGdHyNdwH4At3YbSCPsMoItE9wGoScQRGVSrbNsdnZ3Zu7dO6M9XyUk7czofPOzM4IFCCGEEEIIIUMzn1+eWNb/3LJyQsjYeWbdAF/m88s/rs8eHj5n93uyanBb+CW5SeAibAwFGEMBxlCAMRRgDAUYQwHGUIAxFGAMBRhDAcZQgDFJHVz1OWyLJbXDOo4AYyjAmKSGI6A7DaU2/QCBAj6dn6vO1T9/vBQv883b3+Jl1rm+uvLO0/uCMvxvX9e+l3oxOTkTK2vz616sLBfvP8wA+EsIWgO0wwfkQhsifCA8kxexFS/3m9gi3Dze4Pvrj8GXnz7e4FSwOU3cHk2iro8SUIY/Oz6OakQbs90KX169877uYrcCFNsFAOvtFsv9JkpC9G2oZvglF7uV6vdDkfjt2ewD+oY6VPhSZCMA6A43t/CBzAQA7pBzDB/IUADwf9i5hg8I3IZakXPoVbIcAYcEBRhDAcZQgDGDLMKLonh6fTedNr7vovr9tnL70FZWW3ld18WQ/AhYFIV30NJ1aNafvABt+oar1RFGLUB7ZPUhmY1Y0zxbDWhRFK1zscQ83dUGDZIeAZqLXz1YV13196WFJC1gKDRFd0EBPagKkpaVzBowJK59SRtaoyRpAT7zbdd3LaeZNpIRkGuAsSQjIDXaOoRkZ8hiET7U3g9kMAKsF0ltkhGQa4CxiAkIubWz4m46fWqv64hDewdcksUacMhQAGxPRVUE1E8xU6Rpimlqq/YfQmJrQHVeBZqDH/J0s4k+9Q/dYUY9BYV0COlONGoBgF+gGiNYdB9QNrDvnx2p4Gp3/XMNVDZiQ+1epYOx6Cijn4KsoQBjKMAYCjCGAoyhAGMowBgKMIYCjKEAYyjAmGgB6+1Woh1ZIvHbow7jbo8mWO43o5Zg+rwgiQaMnaApqHw+GvlHaCZJPjUxV0KemkgIIYQQQgghhBBCxsNfQOTmge3/KbkAAAAASUVORK5CYII=";class Q{parentNode;display;remote={btn:null,id:null,type:null,data:null};constructor(t={}){this.parentNode=t.parentNode||document.body,this.display=new M({parentNode:this.parentNode}),this.AddButton("pointer","toggle","포인터",B),this.AddLine(),this.AddButton("square","toggle","도형1",N),this.AddButton("picture","toggle","그림도형",Y),this.AddLine(),this.AddButton("favorate","action","즐겨찾기",y),this.AddButton("setting","action","환경설정",b),this.AddButton("remove","toggle","도형삭제",x),this.AddButton("imagedownload","action","화면캡처",D)}AddLine(){const t=document.createElement("hr");t.classList.add("line"),this.parentNode.appendChild(t)}AddButton(t,e,s,o){const i=document.createElement("div");i.classList.add("button"),i.classList.add(e),o&&(i.style.backgroundImage=`url(${o})`),this.parentNode.appendChild(i),i.addEventListener("click",()=>{this.remote.id!==null?this.remote.type==="toggle"&&this.remote.id===t?this.End():(this.End(),this.Start(i,t,e,s),e==="action"&&this.Action()):(this.Start(i,t,e,s),e==="action"&&this.Action())})}Start(t,e,s,o){t.classList.add("menu_select"),this.display.text=o,this.remote.btn=t,this.remote.id=e,this.remote.type=s}Action(t={}){if(this.remote.id){switch(this.remote.id){case"square":console.log(`[설치] 좌표 (${t.x}, ${t.y}) 에 사각형 생성`);break;case"favorate":console.log("즐겨찾기 실행");break;case"imagedownload":console.log("화면 캡처 시작");break;default:console.log("실행:",this.remote.id)}this.End()}}End(){this.remote.btn&&(this.remote.btn.classList.remove("menu_select"),this.display.text=`
`,this.remote.btn=null,this.remote.id=null,this.remote.type=null)}}class M{parentNode;div;down=null;constructor(t={}){this.parentNode=t.parentNode||document.body;const e=document.createElement("div");this.div=e,e.classList.add("display"),e.innerText=`
`,this.parentNode.appendChild(e),e.addEventListener("pointerdown",o=>{e.setPointerCapture(o.pointerId),this.down={x:o.offsetX,y:o.offsetY}}),e.addEventListener("pointermove",o=>{if(!this.down)return;const i=o.clientX-this.down.x,n=o.clientY-this.down.y;this.parentNode.style.left=`${i}px`,this.parentNode.style.top=`${n}px`});const s=o=>{this.down=null,e.releasePointerCapture(o.pointerId)};e.addEventListener("pointerup",s),e.addEventListener("pointercancel",s)}set text(t){this.div.innerText=t}}const u=document.querySelector("#app"),k=new m,a=g(v,"view");g(C,"controller");const h=g(Q,"remocon"),l=document.createElement("div");l.id="remocon_reset_pos";u?.appendChild(l);l.onclick=()=>{h.parentNode.style.left="10px",h.parentNode.style.top="30px"};const S=async()=>{const d=await k.Call("loadSetting",{});console.log(d),await a.LoadMap("test1")};S();function g(d,t){const e=document.createElement("div");return e.id=t,u?.appendChild(e),new d({parentNode:e})}

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();function y(A){return new Worker(""+new URL("idb.worker-DvAD-bDS.js",import.meta.url).href,{name:A?.name})}let k=class{worker;seq=0;pending=new Map;constructor(){this.worker=new y,this.worker.onmessage=t=>this.Message(t.data)}Message(t){const{id:e,ok:i,result:o,error:s}=t,n=this.pending.get(e);n&&(this.pending.delete(e),i?n.resolve(o):(n.reject(s),console.warn(t)))}Call(t,e){return new Promise((i,o)=>{const s=++this.seq;this.pending.set(s,{resolve:i,reject:o}),this.worker.postMessage({id:s,type:t,payload:e})})}},x=class{parentNode;popup;constructor(t={}){this.parentNode=t.parentNode||document.body,this.parentNode.addEventListener("click",e=>{e.target===this.parentNode&&this.Close()}),this.popup=document.createElement("div"),this.popup.classList.add("popup"),this.popup.contentEditable="true",this.parentNode.appendChild(this.popup)}SetData(t){console.log(t)}Open(){this.parentNode.style.display="block"}Close(){this.parentNode.style.display="none"}};const R=["e","w","s","n","es","en","ws","wn",null],d=Math.round(window.devicePixelRatio)||1;let E=class u{type="none";id=null;parentID=null;tabID=null;zIndex=null;x=0;y=0;_w=100;_h=100;_capture;children={none:[],point:[],square:[],line:[],button:[]};static children_order=["none","point","square","line","button"];static children_order_reverse=[...u.children_order].reverse();constructor(){}get w(){return this._w}set w(t){100<=t&&t<=1e3&&(this._w=t)}get h(){return this._h}set h(t){100<=t&&t<=1e3&&(this._h=t)}SetData(t={}){Object.assign(this,t)}SetCapture(t){this._capture=t,this.Render()}GetChildrenByType(t){return this.children[t]||[]}get children_order(){return u.children_order}get children_order_reverse(){return u.children_order_reverse}AddChild(t){const e=b[t.type];if(!e)return;const i=new e(t);this.GetChildrenByType(t.type).push(i)}SetOrderChild(t){const e=this.GetChildrenByType(t.type),i=e.indexOf(t);if(i>-1){const[o]=e.splice(i,1);e.push(o)}}FindByID(t){const e=Object.values(this.children);for(const i of e){const o=i.find(s=>s.id===t);if(o)return o}return null}FindByIDAndType(t,e){const o=this.GetChildrenByType(e).find(s=>s.id===t);return o||null}GetAllChildren(){const t=[],e=Object.values(this.children);for(const i of e)for(const o of i)t.push(o);return t}IsCollisionPoint(t,e){return t>=this.x&&t<=this.x+this.w&&e>=this.y&&e<=this.y+this.h}GetCollisionChildPoint(t,e){for(let i of this.children_order_reverse){const o=this.children[i];for(let s=o.length-1;s>=0;s--){const n=o[s];if(n.IsCollisionPoint(t,e))return n}}return null}GetCollisionEdge(t,e){if(!this.IsCollisionPoint(t,e))return null;const i=10,o=this.x,s=this.x+this.w,n=this.y,r=this.y+this.h;let a="";return Math.abs(t-s)<=i?a+="e":Math.abs(t-o)<=i&&(a+="w"),Math.abs(e-r)<=i?a+="s":Math.abs(e-n)<=i&&(a+="n"),R.includes(a)?a:null}Render(){}Draw(t){t.drawImage(this._capture.cav,this._capture.x*d,this._capture.y*d,this.w*d,this.h*d,this.x,this.y,this.w,this.h)}DrawHover(t){t.save(),t.strokeStyle="skyblue",t.lineWidth=6,t.strokeRect(this.x+3,this.y+3,this.w-6,this.h-6),t.restore()}DrawSelect(t){t.save(),t.strokeStyle="green",t.lineWidth=6,t.strokeRect(this.x+3,this.y+3,this.w-6,this.h-6),t.restore()}},S=class extends E{bgColor;constructor(t){super(),this.type="square",this.bgColor=t.bgColor||"black",this.SetData(t)}Save(){}a2=1;Render(){const t=this._capture.ctx,e=this._capture.x,i=this._capture.y;t.save(),t.clearRect(e,i,this.w,this.h),t.fillStyle=this.bgColor,t.fillRect(e,i,this.w,this.h);const o=16;t.font=`${o}px sans-serif`,t.fillStyle="white",t.textBaseline="top",t.fillText(`안녕하세요${this.a2++}`,e+20,i+20),t.restore()}};const b={axis:E,square:S};let N=class extends b.axis{parentNode;scope={min:.5,max:2,zoom:1,w:0,h:0,dpr:Math.round(window.devicePixelRatio)||1,bgStep:100,bgPattern:null};layers={};status={hover:null,select:[]};constructor(t={}){super(),this.parentNode=t.parentNode||document.body,this.InitLayers()}get zoom(){return this.scope.zoom}set zoom(t){t>=this.scope.min&&t<=this.scope.max&&(this.scope.zoom=t)}InitLayers(){["background","board","effect"].forEach(t=>{const e=document.createElement("canvas"),i=e.getContext("2d");e.style="position:absolute; width:100%; height:100%;",this.parentNode.appendChild(e),this.layers[t]={cav:e,ctx:i}})}SpaceX(t){const e=this.scope.w,i=this.scope.zoom,o=(t-e/2)/i+this.x;return Math.round(o)}SpaceY(t){const e=this.scope.h,i=this.scope.zoom,o=(t-e/2)/i+this.y;return Math.round(o)}SpaceLine(t){return Math.round(t/this.zoom)}async LoadMap(t){console.log(t),this.children={none:[],point:[],square:[],line:[],button:[]},this.AddChild({type:"square",x:-400,y:0,w:700,h:300,bgColor:"blue",id:"blue"}),this.AddChild({type:"square",x:-200,y:0,w:300,h:300,bgColor:"orange",id:"orange"}),this.AddChild({type:"square",x:0,y:0,w:100,h:200,bgColor:"red",id:"red"}),this.AddChild({type:"square",x:200,y:0,w:300,h:300,bgColor:"green",id:"green"}),F.LinkDiagrams(),C.loop.isDraw=!0,C.Loop()}Draw(){const t=this.scope.w,e=this.scope.h,i=this.scope.dpr,o=this.scope.zoom;Object.values(this.layers).forEach(r=>{const a=r.ctx;a.setTransform(i,0,0,i,0,0),a.clearRect(0,0,t,e),a.translate(t/2,e/2),a.scale(o,o),a.translate(-this.x,-this.y)}),this.DrawBackground(),["none","point","square","line","button"].forEach(r=>{const a=this.children[r];if(!(a.length<=0))for(const l of a)l.Draw(this.layers.board.ctx)});const n=this.status.hover;n!==null&&n.DrawHover(this.layers.effect.ctx)}DrawBackground(){if(!this.layers.background)return;const t=this.layers.background.ctx,e=this.scope.bgStep,{w:i,h:o,dpr:s,zoom:n}=this.scope;if(!this.scope.bgPattern){const r=document.createElement("canvas");r.width=e,r.height=e;const a=r.getContext("2d");a.strokeStyle="rgb(54,63,63)",a.beginPath(),a.moveTo(0,0),a.lineTo(e,e),a.moveTo(e,0),a.lineTo(0,e),a.stroke(),this.scope.bgPattern=t.createPattern(r,"repeat")}if(this.scope.bgPattern){t.save(),t.setTransform(s,0,0,s,0,0),t.clearRect(0,0,i,o);const r=new DOMMatrix;r.translateSelf(i/2,o/2),r.scaleSelf(n,n),r.translateSelf(-this.x,-this.y),this.scope.bgPattern.setTransform(r),t.fillStyle=this.scope.bgPattern,t.fillRect(0,0,i,o),t.restore()}}},B=class{down=null;move={x:0,y:0,isLoop:!1};pinch=null;parentNode;loop={isLoop:!1,isHover:!1,isEdge:!1,isDraw:!1,isResize:!1};constructor(t){const e=t.parentNode;this.parentNode=e,this.Resize();const i=()=>{if(!this.pinch||this.pinch.targets.size<2)return 0;const s=Array.from(this.pinch.targets.values());return Math.hypot(s[0].clientX-s[1].clientX,s[0].clientY-s[1].clientY)},o=s=>{if(e.releasePointerCapture(s.pointerId),!(!this.pinch||!this.pinch.targets.has(s.pointerId)))switch(this.pinch.targets.delete(s.pointerId),this.pinch.targets.size){case 0:this.down&&this.PanEnd(s.offsetX,s.offsetY,s.timeStamp),this.pinch=null,this.down=null;break;case 1:this.pinch.distance=0;break}};window.addEventListener("resize",()=>{this.Resize()}),e.addEventListener("contextmenu",s=>{s.preventDefault()}),e.addEventListener("wheel",s=>{this.PanZoom(-s.deltaY*.001)},{passive:!0}),e.addEventListener("pointerdown",s=>{if(!(this.pinch&&this.pinch.targets.size>=2))switch(e.setPointerCapture(s.pointerId),this.pinch===null&&(this.pinch={distance:0,targets:new Map}),this.pinch.targets.set(s.pointerId,s),this.pinch.targets.size){case 1:this.PanStart(s.offsetX,s.offsetY,s.timeStamp);break;case 2:this.pinch.distance=i();break}}),e.addEventListener("pointermove",s=>{switch(this.pinch?.targets.has(s.pointerId)&&this.pinch.targets.set(s.pointerId,s),this.pinch?.targets.size??0){case 0:this.PanHover(s.offsetX,s.offsetY);break;case 1:this.PanMove(s.offsetX,s.offsetY);break;case 2:const n=i();if(this.pinch&&this.pinch.distance>0){const r=this.pinch.distance-n;this.PanZoom(-r*.002)}this.pinch&&(this.pinch.distance=n);break}}),e.addEventListener("pointerup",o),e.addEventListener("pointercancel",o)}Resize(){h.scope.w=window.innerWidth,h.scope.h=window.innerHeight,this.loop.isResize=!0,this.Loop()}PanZoom(t){h.zoom+=t,this.loop.isDraw=!0,this.Loop()}PanStart(t,e,i){const o=h.SpaceX(t),s=h.SpaceY(e),n=h.GetCollisionChildPoint(o,s);n!==null&&h.SetOrderChild(n);const r=n||h,a=n?n.GetCollisionEdge(o,s):null;this.down={target:r,offsetX:t,offsetY:e,x:r.x,y:r.y,w:r.w,h:r.h,timeStamp:i,edge:a},this.loop.isDraw=!0,this.Loop()}PanMove(t,e){if(this.down===null)return;const i=c.remote.id;if(i===null||i==="pointer"){const o=h.SpaceLine(t-this.down.offsetX),s=h.SpaceLine(e-this.down.offsetY),n=this.down.target;if(n===h)n.x=this.down.x-o,n.y=this.down.y-s;else if(this.down.edge===null)n.x=this.down.x+o,n.y=this.down.y+s;else{const r=new Map;switch(this.down.edge){case"e":r.set("w",this.down.w+o);break;case"w":r.set("x",this.down.x+o),r.set("w",this.down.w-o);break;case"s":r.set("h",this.down.h+s);break;case"n":r.set("y",this.down.y+s),r.set("h",this.down.h-s);break;case"es":r.set("w",this.down.w+o),r.set("h",this.down.h+s);break;case"wn":r.set("x",this.down.x+o),r.set("w",this.down.w-o),r.set("y",this.down.y+s),r.set("h",this.down.h-s);break;case"en":r.set("w",this.down.w+o),r.set("y",this.down.y+s),r.set("h",this.down.h-s);break;case"ws":r.set("x",this.down.x+o),r.set("w",this.down.w-o),r.set("h",this.down.h+s);break}const a=Object.fromEntries(r);if(a.w!==void 0&&a.w<=100||a.h!==void 0&&a.h<=100||a.w!==void 0&&a.w>=1e3||a.h!==void 0&&a.h>=1e3)return;n.SetData(a),n.Render()}this.loop.isDraw=!0,this.Loop()}}PanHover(t,e){this.down===null&&(this.move.x=t,this.move.y=e,this.loop.isHover=!0,this.Loop())}async PanEnd(t,e,i){const o=this.down?.timeStamp??0,s=i-o<200,n=c.remote.id;if(s&&n!==null){const r=h.SpaceX(t),a=h.SpaceY(e);c.Action({x:r,y:a})}this.down=null,this.loop.isDraw=!0,this.Loop()}Loop(){this.loop.isLoop===!1&&(this.loop.isLoop=!0,requestAnimationFrame(()=>{this.loop.isLoop=!1,this.loop.isEdge===!0&&(this.loop.isEdge=!1),this.loop.isHover===!0&&(this.loop.isHover=!1,this.CheckCollisionEdge()),this.loop.isDraw===!0&&(this.loop.isDraw=!1,h.Draw()),this.loop.isResize===!0&&(this.loop.isResize=!1,Object.values(h.layers).forEach(t=>{t.cav.width=h.scope.w*h.scope.dpr,t.cav.height=h.scope.h*h.scope.dpr}),h.Draw())}))}CheckCollisionEdge(){const t=h.SpaceX(this.move.x),e=h.SpaceY(this.move.y),i=h.status.hover,o=h.GetCollisionChildPoint(t,e);o!==i&&(h.status.hover=o,this.loop.isDraw=!0,this.Loop());let s="default";if(o!==null)switch(o.GetCollisionEdge(t,e)){case"e":case"w":s="ew-resize";break;case"s":case"n":s="ns-resize";break;case"es":case"wn":s="nwse-resize";break;case"en":case"ws":s="nesw-resize";break;default:s="move";break}this.parentNode.style.setProperty("cursor",s,"important")}};const p=Math.round(window.devicePixelRatio)||1;let D=class{n1=0;info={cutSize:500,small:{w:2048,h:2048,slotSize:512,slotCount:16},large:{w:2048,h:2048,slotSize:1024,slotCount:4},temp:{w:1024,h:1024,slotSize:1024,slotCount:1}};maps={small:[this.CreateMap("small")],large:[this.CreateMap("large")],temp:this.CreateMap("temp")};constructor(){}LinkDiagrams(){["large","small"].forEach(o=>{this.maps[o].forEach(s=>{s.slots=[]})});const t=h.GetAllChildren();if(t.length<=0)return;const e={large:[],small:[]},i={large:0,small:0};for(const o of t){const s=this.CheckMapType(o);e[s].push(o.id);const n=this.info[s];e[s].length===n.slotCount&&(this.SetSlotsMap(s,e[s],i[s]),e[s]=[]),this.SendSlotDiagram(o,s,i[s]),i[s]++}["large","small"].forEach(o=>{const s=o;e[s].length>0&&this.SetSlotsMap(s,e[s],i[s])})}SendSlotDiagram(t,e,i){const o=this.info[e],s=Math.trunc(o.w/o.slotSize),n=i%s,r=Math.trunc(i/s),a=n*o.slotSize,l=r*o.slotSize,m=Math.trunc(i/o.slotCount),w=this.maps[e][m];console.log(w,a,l);const v={cav:w.cav,ctx:w.ctx,x:a,y:l};t.SetCapture(v)}SetSlotsMap(t,e,i){const o=this.info[t],s=Math.ceil(i/o.slotCount);s>this.maps[t].length&&this.maps[t].push(this.CreateMap(t));const n=this.maps[t][s-1];n.slots=e}CheckMapType(t){const e=this.info.cutSize;return t.w>e||t.h>e?"large":"small"}InsertSlot(t){const e=this.CheckMapType(t);for(const o of this.maps[e])for(let s=0;s<o.slots.length;s++)if(o.slots[s]===null){o.slots[s]=t.id;return}const i=this.CreateMap(e);i.slots[0]=t.id,this.maps[e].push(i)}CreateMap(t){const e=this.info[t],i=Math.trunc(e.w/e.slotSize),o=Math.trunc(e.h/e.slotSize),s=new Array(i*o).fill(null),n=document.createElement("canvas");n.width=e.w*p,n.height=e.h*p;const r=n.getContext("2d");r.setTransform(1,0,0,1,0,0),r.scale(p,p),document.body.appendChild(n);let l={temp:"red",large:"blue",small:"green"}[t]||"gold";return n.style=`position:absolute; float:right; top:${100+this.n1}px;right: 20px; width: 200px; height: 200px;border: 1px solid ${l};`,this.n1=this.n1+250,{cav:n,ctx:r,type:t,slots:s}}};const M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAVRJREFUeJzt3LFNw0AYgFGDmIEZaCIWoGUKeoaiZwpaFkBpmIEloEkKIgoMPr7EvCe5vST3RdZvRblpAgAAADhJ77uLGc4WWudw45dad/XO6zfw3wkQEyAmQEyA2Nxp5TdjpsnoC3M2ZYkZX4QDbkExt6CYJ+GYW1BMgJgAMQFiAqyIH2R+YMi4eL3ZrDLEy3Z7/OP1bvNXex31l2vtm7+/loxwsdRCh26vbkYtnXl6fV58zWEB9h7u3ka/xHD3j5fD1h46hq5h86dp7OfwHBATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQEyAmQEyAmAAxAWICxASICRATICZATICYADEBYgLEBIgJEBMgJkBMgJgAMQFiAsQEiAkQGxpg5F/8/9LIzzH8rIi1RBhlWIARJ4vwDWs/M2jpA5scWTbTSRxbBgAAAAAAn30A4fLQgWRlXGAAAAAASUVORK5CYII=",Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAeBJREFUeJzt2U1SwkAQhuHWcok3wBWeAFZQcHuq3HkCXOENcD8urNGpVCIkM0x3pt/nAPz0l/4CExEAAAAAAAAAAAAAAAAAwHydzpdwOl+C9udwa73fhhBCIIg/TxpvulouRORnI0REXl+eHzQ+h0txC1JxIzxuhcoGdMWNEPG3FSYCSFFPFfTV0JDW68ncBnS1Xk/mA0i1WE+zCiDqBiHSRhhVjbkPjLlXaH+vsWa5AX3mWk/NBBBRTyOUrqE51lNzG9DHcj25CCCinnrUqiGr9eRqA/po19NjzTezbLVcyGq5kNP5Etb7rckb9t1o11Cq9vDZgMTmsJP34xsVpEFj+KZo1pBm57vfAO0r33UA2sMXcRyAheGbU+s+YOl3vrsNsHbluwrg4/PL1PBNuncNWXsu4GoDROT3vEf7c0TuAhCxF4I5NR9Van9XlxsQWdgE1wGI2AjBpLE1lFtbWiE0sQHxz9XmsJv8GmxCx61XdPdYYa6bYM4tgxw60yGEQv4b5LUDNUIoYGiIt55mEkKmvgGOPUomhEzpAKee4xNChji83IcoU0Ow9PBGxXq/LTaEKX/uSrwvElP/X6CgayEw/Apyf+KigG4IDF9BqV9ZyMDwAQAAAAAAAAAAAAD38A2ZOL2SNKZ2wgAAAABJRU5ErkJggg==",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAedJREFUeJztnDFuwzAMRdWiXXuc3H/ucbJmSJcaBYIGjm2Jj5TfG7NY5ucnJSpJayIiIiIiIiIiIiIiIom5XS/32/Vyp9dxhHd6AWfnjV7AXh4z//Pru+S76ACYaQSo2gtKClA12P9RUoCZKNe41rK/WjPWATClsuXV2l/JBToApkymbN35VHGBDoApkSV79/0VXKADYNJnyNFTb3YX6AAYBYBJbc9eQ7fMZUgHwKTNjN4j56wu0AEweFbQlyu0Mw4/nA4gzVEBLUEwXex3Vhf0KF9d699ZhOjZN7o3oNlF6N20h+wAZhVhxI5p2BZsNhFGbVeH7oFnEWHkWSHkEFJViIhDWtgpsJoIUSfk0GN4FREixxPhc5DsIkTPhpBBVFYRiMEcNgnMJgI1FUVHsVlEIEfS3gfA9wGOo2EUAEYBYGzCje0DOgBGARrrREyALOWHRgfAKMAvlCMRASw/f+gAmLL3AY9796q/JfiIfFgPngVo+bxaeSvjgK2ZeUSIaa8k9wTlaDCIZ24hdRPuEQh63r9GSgeMCtoWN0z3tZRXXj7qpTOtJU0JiiwVmcoSnnF0MOi1YecAOvAL9Pkh3AFZAv+M6H/kHd4DKgW/tfg1hjXhCsFfqLRWERERERERERERERERWeEHFjPJPzQ9OhwAAAAASUVORK5CYII=",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAABEFJREFUeJztnb9q40AQxieXqwyBFAEHl1cmnTtjg17Kj5GXMlxId51dujx84MIQSBd0hZl4T2dZ++cb7aw1v+rgLGl2vp3V7uxoQ2QYhmEYhmEYvXOT2wBfpotZHfL7Xz/fimjb99wG+HJ3Ow+84k3EDjTFCEBE9PT84fW7zXokbAmOb7kN8CF0+Im9JgdFCHB3O/fu/UTHSAkfsvJQhADXjAmQGfUCpIzlJbwHxARANT50/GeQ7wFJIUUEYIOralnn7sGpz6+qZY2y5Rzw1SIbyj2X5+Tvn69E1L1CdRvKPTgmAojov2f7PJ9tcJ+9WY+87Q8FerOm811cZ5xrhHstE+v4Ju7C7JIjm45v3kNCBNiNLjnfpdmQpuNRTr/0fCJqtSHEdoQ9kJv4NoBxndCX41E2oEVIvkGo810261HvjkfYgBQh6eIU55cOSoTkCKiqZT005zOb9YhWq5ckHyavA94/X4tK/6JwIyCFZAFK2XmSANF2yEp4aFGAGHoYiABDigLU0MPAckFDiwIU8FTENU9JufcjI179fsC1I5INlYyCw3538f/vHx5FnivR+4kKGoJcx//+8+Psbybj7de/JYSQEEF9XRA73nV62xSQN0+OHMWQiggU0HQ0svc3HR8672YxOCpQQqCjQGUEuM6PXfDwdVW1rCfjLR32O5XRANsPQPX+w34X3evbcKMBIQIyClRFADsf5XjGjQYijAgo1KwDuqaXpT6ri2QBkMOPRO93Wa1ebtqmsCFwzRGiVCW6sW4FARsVi9TQ0wa/mFOGomalRez7wPsd0HQ4Uf8b6Zpw275Zz6mq5l/RECJIZ5GURJ2OS9+9n0FEQRsh0eEVAUPu6TGwv3zS81lnQRpmI7ltyD4NzTH8EOFmRKlkF2DomACZMQEyYwJkxgTITHYBJuNtYyerH3ghlpusAmhIC+e2wWslzCs6WxH7EVKg5r0AkkzGlZgNdWk6PCQZ550NPd7wdATMdDGrN2vZRJ1mUOloyCdKiA2ZvqIA1ftR+8KQ7wNQhbnSMyLUzAe5KZ99Gsr0ORvJPfNxUVUVcXTMKQq0lqUgUVkZhyjMYtxhR1tNEJGyCGDuHx7psN/9807QUpqIRn11dGxxroTjB1kdfXLgafbSNlOSLk+XwD7Q8GTwH2howL4Ru0JUTkM1g44CSAQMxfkS2BAUCPpUXogAQ+v9T88fsKQh5PsAhCElgmh7sgBD6/0MaiiyI8siQR1ZlhQB/ODYDRkNp6vE2q3i0D7Gjq2Mp9eDW7sOTSWyg1uT6Dq6uOvYYL6WsaOLI2g7vNt3Q8UO7wbgipCSN0lNcaTmbfj5Us4nEvxDbtPFrEYYnHIwLOp0Q1RbzqH+tMPYKJDaQEGjPhmX4kDtzicqQIBrxwTITBEChKY60KfbSlKEADFjeQnjP1EBdUEuGpJ3aIoRoJQhxTAMwzAMwzAK4C+ZeT3j3R9QKgAAAABJRU5ErkJggg==",O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAetJREFUeJzt3EFKw0AUh/EqHkREegIXCj2DIOLeO7h16bZ3ELciBc8guPEEUsSb6CrQloY2k9f5JpPvtyktJoT3n5dJJsTJRJIkSZIkSUrzRx/A0BwF7mu1+JH7rdoxfQBjZwAwA4D1OVd3mXCdE1qkFiblascQtrADYF6GwpyEYQYAM4DKuBakYQm5Wjk7vXDkr/j5/dq7rs4BsJPInV1dv0XubnA+3287b2MHwAwAZgAwA4AZAMwAYAYAMwCYAcBC74RzeH6667X9/eNr0JHEsANgBgAzAJgBwAwAZgAwA4AZAKyoG7Gbj5u174vZAjqSfIoIYLPwm7/XHAQaQFvh2/4uMojldD45/34I218qbA7Yt/h9t9lmOZ2vfZKchGFIAFEjOcXmqKe7YFQdMHu53Po7GUL2AMjRX6LRdEDb6G9QXTCKAHYVv0GEMIoASpY9gNx3tfuO/kbuLrADYEgAubqg6+hv5OyCajsgtfiNXCFgAaR0QY2roqEv6aW+orTr5qxr4SNHb5cV0+YVpS4v6RXxPKApcMQDmehTx6GXrYsIoFHjKWaXqibhQ02ch5yQqwpgiIo6BfVVwiPGruwAmAHADABmADADgBkAzABgBgAzAJgBwEKXIlL+ZdfY2QGSJEmSJEmSJNXvHxGGYJKsrivNAAAAAElFTkSuQmCC",P=""+new URL("remove-Bp_BGg2G.png",import.meta.url).href,T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAvJJREFUeJztnL1qG0EUhU9CGgfyBEa4DUkpkEuZNIG0UpsHiMGdHyNdwH4At3YbSCPsMoItE9wGoScQRGVSrbNsdnZ3Zu7dO6M9XyUk7czofPOzM4IFCCGEEEIIIUMzn1+eWNb/3LJyQsjYeWbdAF/m88s/rs8eHj5n93uyanBb+CW5SeAibAwFGEMBxlCAMRRgDAUYQwHGUIAxFGAMBRhDAcZQgDFJHVz1OWyLJbXDOo4AYyjAmKSGI6A7DaU2/QCBAj6dn6vO1T9/vBQv883b3+Jl1rm+uvLO0/uCMvxvX9e+l3oxOTkTK2vz616sLBfvP8wA+EsIWgO0wwfkQhsifCA8kxexFS/3m9gi3Dze4Pvrj8GXnz7e4FSwOU3cHk2iro8SUIY/Oz6OakQbs90KX169877uYrcCFNsFAOvtFsv9JkpC9G2oZvglF7uV6vdDkfjt2ewD+oY6VPhSZCMA6A43t/CBzAQA7pBzDB/IUADwf9i5hg8I3IZakXPoVbIcAYcEBRhDAcZQgDGDLMKLonh6fTedNr7vovr9tnL70FZWW3ld18WQ/AhYFIV30NJ1aNafvABt+oar1RFGLUB7ZPUhmY1Y0zxbDWhRFK1zscQ83dUGDZIeAZqLXz1YV13196WFJC1gKDRFd0EBPagKkpaVzBowJK59SRtaoyRpAT7zbdd3LaeZNpIRkGuAsSQjIDXaOoRkZ8hiET7U3g9kMAKsF0ltkhGQa4CxiAkIubWz4m46fWqv64hDewdcksUacMhQAGxPRVUE1E8xU6Rpimlqq/YfQmJrQHVeBZqDH/J0s4k+9Q/dYUY9BYV0COlONGoBgF+gGiNYdB9QNrDvnx2p4Gp3/XMNVDZiQ+1epYOx6Cijn4KsoQBjKMAYCjCGAoyhAGMowBgKMIYCjKEAYyjAmGgB6+1Woh1ZIvHbow7jbo8mWO43o5Zg+rwgiQaMnaApqHw+GvlHaCZJPjUxV0KemkgIIYQQQgghhBBCxsNfQOTmge3/KbkAAAAASUVORK5CYII=",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAATdJREFUeJzt3LFRw0AQhlGJoRCGGkhowgl1ktAEAbQAuJMjwYwGBIFl33/jfS/XzFqf92wH8jQBAAAAAACXbj72wtubu3bKQXp5378e/ZrP4XrLxfe7x1PN0cXz00N6hF+u0gNUJ0CYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQJkCYAGEChAkQVuox1bePl2me56EeUx1qmHNrrX2/aUYJUfYIWsZIKhtgmsaIMMQa9vTXTU8dSaU3YCm1DTZgRc9tsAErem6DACt6bsCmv6u5NIkP4nIbMMoPsINyAf6T+CZUPkB6I0oHONz8ZYTeWzDUeZj088anN6Ok9iU9BwAAAAAAAAAAABt8AoH5O2No2c3rAAAAAElFTkSuQmCC",J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAatJREFUeJzt3DFOwzAYhuHfCIlObOxIDPQEnbqhHoA7dGXhICxdewfYERtTTwBDJRYuwNROZjKK2lCq2M4X7PdZAip1Ir+1gaiqGQAAAAAAAAAAAAAAAIDSuK5PnI2nPuWFDNXz22vnOTpGp8Fn46lfbzapr2WQrkajrBFOYwd4uf1KcR2Dc/N43st5TmKeXOrkm5ndTc56OU9UAMQjgBgBxAggFv1XUHD58J5qKImP+2vJeVkBYgQQI4BYst8BbZzb/w/e+/1bSM45897/HGuSNYBZ+4Qf87O1xJBtQc65vRUSvt89lix7gDDRzckMX4dtZ1d45dewAmRbUHOSa3il/0a6BTWPtep1C2puPeGxQ9tMDXGybkGHJrf5WNueX8P+b5YxwHyZdrzlPO14Q5EtQKkTlhq3IsSSrQDV7dz/jhUgRgAxAogRQIwAYgQQI4AYAcQIIEYAMQKIEUCMAGIEECOAGAHECCBGADECiBFAjABiBBCLCvD0eZHqOqoV9b6gxWprNikzwmK17eU80W/M6utCS8UHNv0h9wc2AQAAAAAAAAAAAAAAlOkb2c1enlwLpzkAAAAASUVORK5CYII=";class U{parentNode;display;remote={btn:null,id:null,type:null,data:null};constructor(t={}){this.parentNode=t.parentNode||document.body,this.display=new L({parentNode:this.parentNode}),this.AddText("Pointer"),this.AddButton("pointer","toggle","포인터",Q),this.AddButton("multiselect","toggle","그룹선택",z),this.AddButton("editortext","toggle","텍스트편집",J),this.AddLine(),this.AddText("Add Diagram"),this.AddButton("square","toggle","도형1",M),this.AddButton("picture","toggle","그림도형",O),this.AddLine(),this.AddText("Files & System"),this.AddButton("favorate","action","즐겨찾기",G),this.AddButton("setting","action","환경설정",Y),this.AddButton("remove","toggle","도형삭제",P),this.AddButton("imagedownload","action","화면캡처",T)}AddLine(){const t=document.createElement("hr");t.classList.add("line"),this.parentNode.appendChild(t)}AddText(t){const e=document.createElement("small");e.classList.add("small"),e.innerText=t,this.parentNode.appendChild(e)}AddButton(t,e,i,o){const s=document.createElement("div");s.classList.add("button"),s.classList.add(e),o&&(s.style.backgroundImage=`url(${o})`),this.parentNode.appendChild(s),s.addEventListener("click",()=>{this.remote.id!==null?this.remote.type==="toggle"&&this.remote.id===t?this.End():(this.End(),this.Start(s,t,e,i,o),e==="action"&&this.Action()):(this.Start(s,t,e,i,o),e==="action"&&this.Action())})}Start(t,e,i,o,s){t.classList.add("menu_select"),this.display.text=o,this.remote.btn=t,this.remote.id=e,this.remote.type=i,document.body.style.setProperty("cursor",`url(${s}), auto`,"important")}Action(t={}){switch(this.remote.id){case"square":console.log(`[설치] 좌표 (${t.x}, ${t.y}) 에 사각형 생성`),h.AddChild({type:"square",x:t.x,y:t.y,w:100,h:100,bgColor:"red"});break;case"favorate":console.log("즐겨찾기 실행");break;case"imagedownload":console.log("화면 캡처 시작");break;case"editortext":break;default:console.log("실행:",this.remote.id);break}this.End()}End(){this.remote.btn&&(this.remote.btn.classList.remove("menu_select"),this.display.text=`
`,this.remote.btn=null,this.remote.id=null,this.remote.type=null,document.body.style.removeProperty("cursor"))}}class L{parentNode;div;down=null;constructor(t={}){this.parentNode=t.parentNode||document.body;const e=document.createElement("div");this.div=e,e.classList.add("display"),e.innerText=`
`,this.parentNode.appendChild(e),e.addEventListener("pointerdown",o=>{e.setPointerCapture(o.pointerId),this.down={x:o.offsetX,y:o.offsetY}}),e.addEventListener("pointermove",o=>{if(!this.down)return;const s=o.clientX-this.down.x,n=o.clientY-this.down.y;this.parentNode.style.left=`${s}px`,this.parentNode.style.top=`${n}px`});const i=o=>{this.down=null,e.releasePointerCapture(o.pointerId)};e.addEventListener("pointerup",i),e.addEventListener("pointercancel",i)}set text(t){this.div.innerText=t}}const I=document.querySelector("#app");new k;g(x,"tedi");const F=new D,h=g(N,"view"),C=g(B,"controller"),c=g(U,"remocon"),f=document.createElement("div");f.id="remocon_reset_pos";I?.appendChild(f);f.onclick=()=>{c.parentNode.style.left="10px",c.parentNode.style.top="30px"};const X=async()=>{await h.LoadMap("test1")};X();function g(A,t){const e=document.createElement("div");return e.id=t,I?.appendChild(e),new A({parentNode:e})}
